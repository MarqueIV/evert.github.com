---
title: "I wish JSON5 was bigger!"
date: "2023-01-09 06:00:00 UTC"
geo: [45.686510, -79.328419]
location: "East York, ON, Canada"
draft: true
tags:
  - json
  - yaml
  - json5
  - toml
---

As developers we write a lot of code, but we also deal with a lot of
configuration files.

The three major formats I tend to use are:

* JSON
* YAML
* .env

But to me they're all kind of painful to use. JSON feels like it should
_never_ have become a format that people hand-write. So many quotes,
and configuration formats **need comments!**

`.env` have a very specific purpose. They're OK at that.

YAML has always been difficult to read and write to me. I can somehow never
retain the structue and end up copy-pasting things from examples.

A small example for Github workflows/actions:

```yaml
steps:
  - uses: actions/checkout@v2
  - uses: actions/setup-node@v2
    with:
      node-version: 14
      registry-url: https://registry.npmjs.org/
  - run: npm ci
  - run: npm publish
```

I've written lots of these but couldn't tell you  why `uses` has a dash in
front, and `node-version` does not.  I also use [home assistant][1],
which lets you write advanced automations with YAML. I wanted to play with
this but it's been a barrier I've not been able to overcome. I don't know
if it's me, because when I chatted with some of my peers (hi mhum!) they
did not share my sentiment.

YAML can also have very [surprising behavior][4], with casting types:

From the [linked article][4], this:

```yaml
- movie:
    title: Blade Runner
    year: 1982
```

becomes:

```yaml
- movie:
    title: 1979
    year: 2016
```

And

```yaml
- country1: ca
- country2: no
```

Becomes:

```yaml
- country1: ca
- country2: false
```

I'm sure there's YAML linters out there that help avoid the pitfalls, but in
my mind configuration files should be simple.

There's some configuration formats I like, such as [TOML][2] and also
[JSON5][3]. They strike the right balance to me with being easy to read and
write, unambigious, supporting comments and strictness.

TOML is like ini files on steroids, and JSON5 is JSON but with fewer quotes,
comments and multi-line strings.

I can adopt them in some of my own projects, but most of the configration files
I maintain are consumed by things I can't control. I hope some of these
will pick them up at some point. Inertia seems bigger than ever for infra,
but JSON and YAML can't be the final word for human-maintained data formats.

If NPM adopted JSON5, I would annotate so much in my `package.json`. I'd
document why a dependency is needed,  why we are stuck using a previous major
version of a dependency and what the purpose is of each script.

[1]: https://www.home-assistant.io/
[2]: https://toml.io/en/
[3]: https://json5.org/
[4]: https://www.infoworld.com/article/3669238/7-yaml-gotchas-to-avoidand-how-to-avoid-them.html
